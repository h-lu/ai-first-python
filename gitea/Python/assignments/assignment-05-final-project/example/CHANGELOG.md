# 版本记录

## v1.0.0 (2024-12-06) - 最终提交版本

### 新增

- [功能] 完成 Streamlit Web 界面
  - 写日记页面：支持日期选择、标签输入、自动情绪分析
  - 日记列表页面：支持月份筛选、展开查看详情
  - 搜索页面：关键词搜索
  - 月度总结页面：AI 生成总结
  - 导出页面：导出为 Markdown 并下载
- [功能] 添加写作建议功能（LLM）
- [功能] 添加写作灵感生成功能（LLM）

### 修复

- [Bug] 修复月度总结在没有日记时崩溃的问题
  - 原因：直接传空列表给 LLM，没有提前判断
  - 修改：添加空列表检查，显示友好提示
- [Bug] 修复导出文件路径不存在时的错误
  - 原因：output 目录不存在时 open 会失败
  - 修改：添加 `mkdir(parents=True, exist_ok=True)`

### 改进

- [优化] 改进 CLI 帮助信息，添加使用示例
- [优化] 统一错误提示格式，使用 emoji 增加可读性
- [重构] 将 LLM 相关代码独立为 `llm_features.py` 模块

---

## v0.3.0 (2024-12-04) - LLM 功能完善

### 新增

- [功能] 添加月度总结功能（LLM）
  - 统计本月日记数量和情绪分布
  - 生成本月亮点、成长收获、下月期望
- [功能] 添加情绪详细分析功能（LLM）
  - 不只返回标签，还给出分析原因和建议

### 修复

- [Bug] 修复情绪分析返回格式不稳定的问题
  - 原因：LLM 有时返回 "情绪：开心" 而不是 "开心"
  - 修改：添加后处理逻辑，从返回中提取有效情绪标签
- [Bug] 修复 API Key 未设置时的报错不友好
  - 原因：直接抛出 OpenAI 的异常
  - 修改：在初始化时检查，给出明确提示

---

## v0.2.0 (2024-12-02) - 基础功能完善

### 新增

- [功能] 添加日记搜索功能
- [功能] 添加日记导出功能（导出为 Markdown）
- [功能] 添加标签系统
- [功能] 添加基础情绪分析（LLM）

### 修复

- [Bug] 修复日期格式验证
  - 原因：用户输入非法日期格式时程序崩溃
  - 修改：添加 try-except 捕获 ValueError
- [Bug] 修复空内容日记可以添加的问题
  - 原因：没有检查 content 是否为空
  - 修改：添加 strip() 后的空检查

### 改进

- [优化] 日记列表按日期倒序显示（最新的在前）
- [优化] 添加日记内容预览（截取前 50 字符）

---

## v0.1.0 (2024-11-28) - AI 初版

### 新增

- 基本功能实现：添加日记、查看日记、列出日记、删除日记
- JSON 文件存储
- CLI 命令行界面（argparse）
- 初始代码框架由 AI 生成

### 已知问题

- 情绪分析未实现
- 没有搜索功能
- 没有导出功能
- 错误处理不完善
- 没有 Web 界面

