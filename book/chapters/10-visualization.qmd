# æ•°æ®å¯è§†åŒ– {#sec-visualization}

::: {.callout-note}
## æœ¬ç« æ¦‚è¦
- **è¯¾æ—¶**ï¼š2è¯¾æ—¶ï¼ˆç¬¬10å‘¨ï¼‰
- **ç›®æ ‡**ï¼šç”¨å¯è§†åŒ–è®²è¿°æ•°æ®èƒŒåçš„æ•…äº‹
:::

## å­¦ä¹ ç›®æ ‡

å®Œæˆæœ¬ç« åï¼Œä½ å°†èƒ½å¤Ÿï¼š

1. é€‰æ‹©åˆé€‚çš„å›¾è¡¨ç±»å‹
2. ä½¿ç”¨ Matplotlib å’Œ Seaborn ç»‘åˆ¶å›¾è¡¨
3. è®© AI å¸®ä½ ç¾åŒ–å›¾è¡¨

---

## å¯è§†åŒ–çš„ç›®çš„

```{mermaid}
flowchart LR
    A["åŸå§‹æ•°æ®"] --> B["åˆ†æå¤„ç†"]
    B --> C["å¯è§†åŒ–"]
    C --> D["å‘ç°æ´å¯Ÿ"]
    D --> E["ä¼ è¾¾æ•…äº‹"]
    
    style C fill:#e8f5e9
```

### ä¸ºä»€ä¹ˆéœ€è¦å¯è§†åŒ–ï¼Ÿ

| çº¯æ•°å­— | å¯è§†åŒ– |
|-------|-------|
| å¹³å‡åˆ†ï¼š78.5ï¼Œæ ‡å‡†å·®ï¼š12.3 | ä¸€çœ¼çœ‹å‡ºåˆ†å¸ƒå½¢æ€ |
| ç­çº§1ï¼š82ï¼Œç­çº§2ï¼š75ï¼Œç­çº§3ï¼š80 | ä¸€çœ¼æ¯”è¾ƒå·®å¼‚ |
| Aä¸Bç›¸å…³ç³»æ•°ï¼š0.85 | ä¸€çœ¼çœ‹å‡ºè¶‹åŠ¿ |

::: {.callout-tip}
## å¥½çš„å¯è§†åŒ–
- **å‡†ç¡®**ï¼šçœŸå®åæ˜ æ•°æ®
- **æ¸…æ™°**ï¼šä¸€çœ¼çœ‹æ‡‚
- **ç¾è§‚**ï¼šå¸å¼•è§‚çœ‹
:::

---

## é€‰æ‹©åˆé€‚çš„å›¾è¡¨

```{mermaid}
flowchart TD
    A["ä½ æƒ³å±•ç¤ºä»€ä¹ˆï¼Ÿ"] --> B{"æ•°æ®ç±»å‹"}
    
    B -->|"è¶‹åŠ¿/æ—¶é—´å˜åŒ–"| C["ğŸ“ˆ æŠ˜çº¿å›¾"]
    B -->|"å¤§å°æ¯”è¾ƒ"| D["ğŸ“Š æŸ±çŠ¶å›¾"]
    B -->|"åˆ†å¸ƒæƒ…å†µ"| E["ğŸ“‰ ç›´æ–¹å›¾/ç®±çº¿å›¾"]
    B -->|"ä¸¤å˜é‡å…³ç³»"| F["ğŸ”µ æ•£ç‚¹å›¾"]
    B -->|"å æ¯”/æ¯”ä¾‹"| G["ğŸ¥§ é¥¼å›¾"]
    B -->|"å¤šå˜é‡æ¯”è¾ƒ"| H["ğŸ”¥ çƒ­åŠ›å›¾"]
    
    style C fill:#e3f2fd
    style D fill:#e8f5e9
    style E fill:#fff3e0
    style F fill:#f3e5f5
    style G fill:#fce4ec
    style H fill:#fff9c4
```

### å›¾è¡¨é€‰æ‹©é€ŸæŸ¥

| ç›®çš„ | æ¨èå›¾è¡¨ | Matplotlib æ–¹æ³• |
|-----|---------|----------------|
| è¶‹åŠ¿å˜åŒ– | æŠ˜çº¿å›¾ | `plt.plot()` |
| æ•°é‡æ¯”è¾ƒ | æŸ±çŠ¶å›¾ | `plt.bar()` |
| åˆ†å¸ƒå½¢æ€ | ç›´æ–¹å›¾ | `plt.hist()` |
| ç¦»æ•£åˆ†å¸ƒ | ç®±çº¿å›¾ | `plt.boxplot()` |
| å˜é‡å…³ç³» | æ•£ç‚¹å›¾ | `plt.scatter()` |
| æ¯”ä¾‹æ„æˆ | é¥¼å›¾ | `plt.pie()` |
| çŸ©é˜µæ•°æ® | çƒ­åŠ›å›¾ | `sns.heatmap()` |

---

## Matplotlib è¿›é˜¶

### è‡ªå®šä¹‰æ ·å¼

```{python}
#| eval: true
#| fig-cap: "è‡ªå®šä¹‰æ ·å¼ç¤ºä¾‹"
import matplotlib.pyplot as plt
import numpy as np

# è®¾ç½®å…¨å±€æ ·å¼
plt.style.use('seaborn-v0_8-whitegrid')

# macOS ä¸­æ–‡å­—ä½“é…ç½®
plt.rcParams['font.sans-serif'] = ['PingFang SC', 'Heiti SC', 'STHeiti', 'Arial Unicode MS']
plt.rcParams['axes.unicode_minus'] = False
plt.rcParams['font.size'] = 12

# æ•°æ®
x = np.linspace(0, 10, 100)
y1 = np.sin(x)
y2 = np.cos(x)

# åˆ›å»ºå›¾è¡¨
fig, ax = plt.subplots(figsize=(10, 6))

# ç»‘åˆ¶çº¿æ¡
ax.plot(x, y1, 'b-', linewidth=2, label='sin(x)')
ax.plot(x, y2, 'r--', linewidth=2, label='cos(x)')

# æ·»åŠ æ ‡é¢˜å’Œæ ‡ç­¾
ax.set_title('Trigonometric Functions', fontsize=16, fontweight='bold')
ax.set_xlabel('x', fontsize=12)
ax.set_ylabel('y', fontsize=12)

# æ·»åŠ å›¾ä¾‹
ax.legend(loc='upper right', fontsize=11)

# æ·»åŠ ç½‘æ ¼
ax.grid(True, linestyle='--', alpha=0.7)

# è®¾ç½®åæ ‡è½´èŒƒå›´
ax.set_xlim(0, 10)
ax.set_ylim(-1.5, 1.5)

plt.tight_layout()
plt.show()
```

### é¢œè‰²å’Œæ ·å¼

```{python}
#| eval: true
#| fig-cap: "é¢œè‰²å’Œæ ·å¼æ¼”ç¤º"
import matplotlib.pyplot as plt
import numpy as np

fig, axes = plt.subplots(1, 3, figsize=(14, 4))

# æ•°æ®
categories = ['A', 'B', 'C', 'D', 'E']
values = [23, 45, 56, 78, 32]

# 1. é»˜è®¤é¢œè‰²
axes[0].bar(categories, values)
axes[0].set_title('Default Colors')

# 2. è‡ªå®šä¹‰å•è‰²
axes[1].bar(categories, values, color='coral', edgecolor='darkred', linewidth=1.5)
axes[1].set_title('Custom Color')

# 3. æ¸å˜è‰²
colors = plt.cm.viridis(np.linspace(0.2, 0.8, len(categories)))
axes[2].bar(categories, values, color=colors)
axes[2].set_title('Gradient Colors')

plt.tight_layout()
plt.show()
```

---

## Seabornï¼šç»Ÿè®¡å¯è§†åŒ–

Seaborn æ˜¯åŸºäº Matplotlib çš„é«˜çº§åº“ï¼Œä¸“æ³¨äºç»Ÿè®¡å›¾è¡¨ã€‚

```{python}
#| eval: true
#| fig-cap: "Seaborn å›¾è¡¨ç¤ºä¾‹"
import seaborn as sns
import matplotlib.pyplot as plt
import pandas as pd
import numpy as np

# è®¾ç½®æ ·å¼
sns.set_theme(style="whitegrid")

# macOS ä¸­æ–‡å­—ä½“é…ç½®ï¼ˆå¿…é¡»åœ¨ set_theme ä¹‹åï¼‰
plt.rcParams['font.sans-serif'] = ['Arial Unicode MS', 'PingFang SC', 'Heiti SC']
plt.rcParams['axes.unicode_minus'] = False

# åˆ›å»ºç¤ºä¾‹æ•°æ®
np.random.seed(42)
n = 100
df = pd.DataFrame({
    'ç­çº§': np.random.choice(['1ç­', '2ç­', '3ç­'], n),
    'æˆç»©': np.concatenate([
        np.random.normal(75, 10, 33),
        np.random.normal(80, 12, 33),
        np.random.normal(85, 8, 34)
    ])[:n]
})

# åˆ›å»ºå¤šå›¾
fig, axes = plt.subplots(1, 3, figsize=(14, 4))

# 1. ç®±çº¿å›¾
sns.boxplot(data=df, x='ç­çº§', y='æˆç»©', ax=axes[0], palette='Set2')
axes[0].set_title('Box Plot')

# 2. å°æç´å›¾
sns.violinplot(data=df, x='ç­çº§', y='æˆç»©', ax=axes[1], palette='Set3')
axes[1].set_title('Violin Plot')

# 3. åˆ†å¸ƒå›¾
for cls in df['ç­çº§'].unique():
    subset = df[df['ç­çº§'] == cls]['æˆç»©']
    axes[2].hist(subset, alpha=0.5, label=cls, bins=15)
axes[2].legend()
axes[2].set_title('Distribution by Class')
axes[2].set_xlabel('Score')

plt.tight_layout()
plt.show()
```

### ç›¸å…³æ€§çƒ­åŠ›å›¾

```{python}
#| eval: true
#| fig-cap: "ç›¸å…³æ€§çƒ­åŠ›å›¾"
import seaborn as sns
import matplotlib.pyplot as plt
import pandas as pd
import numpy as np

# macOS ä¸­æ–‡å­—ä½“é…ç½®
plt.rcParams['font.sans-serif'] = ['Arial Unicode MS', 'PingFang SC', 'Heiti SC']
plt.rcParams['axes.unicode_minus'] = False

# åˆ›å»ºç¤ºä¾‹æ•°æ®
np.random.seed(42)
n = 50
df = pd.DataFrame({
    'è¯­æ–‡': np.random.randint(60, 100, n),
    'æ•°å­¦': np.random.randint(60, 100, n),
    'è‹±è¯­': np.random.randint(60, 100, n),
    'ç‰©ç†': np.random.randint(60, 100, n),
    'åŒ–å­¦': np.random.randint(60, 100, n)
})

# ä½¿æ•°å­¦å’Œç‰©ç†æœ‰è¾ƒå¼ºç›¸å…³æ€§
df['ç‰©ç†'] = df['æ•°å­¦'] * 0.8 + np.random.randint(-10, 10, n)
df['ç‰©ç†'] = df['ç‰©ç†'].clip(0, 100)

# è®¡ç®—ç›¸å…³ç³»æ•°
correlation = df.corr()

# ç»˜åˆ¶çƒ­åŠ›å›¾
plt.figure(figsize=(8, 6))
sns.heatmap(correlation, annot=True, cmap='coolwarm', center=0,
            fmt='.2f', linewidths=0.5, square=True)
plt.title('Subject Correlation Heatmap')
plt.tight_layout()
plt.show()
```

---

## å®æˆ˜ï¼šæˆç»©åˆ†æä»ªè¡¨æ¿

```{python}
#| eval: true
#| fig-cap: "æˆç»©åˆ†æä»ªè¡¨æ¿"
import matplotlib.pyplot as plt
import pandas as pd
import numpy as np

# macOS ä¸­æ–‡å­—ä½“é…ç½®
plt.rcParams['font.sans-serif'] = ['Arial Unicode MS', 'PingFang SC', 'Heiti SC']
plt.rcParams['axes.unicode_minus'] = False

# ç”Ÿæˆæ¨¡æ‹Ÿæ•°æ®
np.random.seed(42)
n = 100
df = pd.DataFrame({
    'å§“å': [f'å­¦ç”Ÿ{i+1}' for i in range(n)],
    'ç­çº§': np.random.choice(['1ç­', '2ç­', '3ç­'], n),
    'è¯­æ–‡': np.random.normal(75, 12, n).clip(30, 100).astype(int),
    'æ•°å­¦': np.random.normal(72, 15, n).clip(30, 100).astype(int),
    'è‹±è¯­': np.random.normal(78, 10, n).clip(30, 100).astype(int)
})
df['æ€»åˆ†'] = df['è¯­æ–‡'] + df['æ•°å­¦'] + df['è‹±è¯­']

# åˆ›å»ºä»ªè¡¨æ¿å¸ƒå±€
fig = plt.figure(figsize=(14, 10))
fig.suptitle('Student Performance Dashboard', fontsize=16, fontweight='bold', y=0.98)

# 1. æ€»åˆ†åˆ†å¸ƒï¼ˆå·¦ä¸Šï¼‰
ax1 = fig.add_subplot(2, 3, 1)
ax1.hist(df['æ€»åˆ†'], bins=15, color='steelblue', edgecolor='white', alpha=0.8)
ax1.axvline(df['æ€»åˆ†'].mean(), color='red', linestyle='--', label=f'Mean: {df["æ€»åˆ†"].mean():.1f}')
ax1.set_title('Total Score Distribution')
ax1.set_xlabel('Total Score')
ax1.legend()

# 2. å„ç§‘å¹³å‡åˆ†ï¼ˆä¸Šä¸­ï¼‰
ax2 = fig.add_subplot(2, 3, 2)
subjects = ['è¯­æ–‡', 'æ•°å­¦', 'è‹±è¯­']
means = [df[s].mean() for s in subjects]
colors = ['#ff6b6b', '#4ecdc4', '#45b7d1']
bars = ax2.bar(subjects, means, color=colors, edgecolor='white', linewidth=2)
ax2.set_title('Average by Subject')
ax2.set_ylim(0, 100)
for bar, mean in zip(bars, means):
    ax2.text(bar.get_x() + bar.get_width()/2, bar.get_height() + 2, 
             f'{mean:.1f}', ha='center', fontsize=10)

# 3. ç­çº§æ¯”è¾ƒç®±çº¿å›¾ï¼ˆå³ä¸Šï¼‰
ax3 = fig.add_subplot(2, 3, 3)
df.boxplot(column='æ€»åˆ†', by='ç­çº§', ax=ax3)
ax3.set_title('Total Score by Class')
plt.suptitle('')  # ç§»é™¤è‡ªåŠ¨æ ‡é¢˜

# 4. è¯­æ–‡vsæ•°å­¦æ•£ç‚¹å›¾ï¼ˆå·¦ä¸‹ï¼‰
ax4 = fig.add_subplot(2, 3, 4)
scatter = ax4.scatter(df['è¯­æ–‡'], df['æ•°å­¦'], c=df['æ€»åˆ†'], cmap='viridis', alpha=0.6)
ax4.set_xlabel('Chinese')
ax4.set_ylabel('Math')
ax4.set_title('Chinese vs Math')
plt.colorbar(scatter, ax=ax4, label='Total')

# 5. ç­‰çº§åˆ†å¸ƒé¥¼å›¾ï¼ˆä¸‹ä¸­ï¼‰
ax5 = fig.add_subplot(2, 3, 5)
def get_grade(score):
    if score >= 270: return 'A (â‰¥270)'
    elif score >= 240: return 'B (240-269)'
    elif score >= 180: return 'C (180-239)'
    else: return 'D (<180)'

df['ç­‰çº§'] = df['æ€»åˆ†'].apply(get_grade)
grade_counts = df['ç­‰çº§'].value_counts()
colors = ['#2ecc71', '#3498db', '#f1c40f', '#e74c3c']
ax5.pie(grade_counts, labels=grade_counts.index, autopct='%1.1f%%', 
        colors=colors, explode=[0.05]*len(grade_counts))
ax5.set_title('Grade Distribution')

# 6. Top 10 å­¦ç”Ÿï¼ˆå³ä¸‹ï¼‰
ax6 = fig.add_subplot(2, 3, 6)
top10 = df.nlargest(10, 'æ€»åˆ†')[['å§“å', 'æ€»åˆ†']].sort_values('æ€»åˆ†')
ax6.barh(top10['å§“å'], top10['æ€»åˆ†'], color='coral')
ax6.set_xlabel('Total Score')
ax6.set_title('Top 10 Students')

plt.tight_layout()
plt.subplots_adjust(top=0.93)
plt.show()
```

---

## è®© AI å¸®ä½ ç¾åŒ–å›¾è¡¨

### Prompt æ¨¡æ¿

```
æˆ‘ç”¨ Matplotlib ç»‘åˆ¶äº†ä¸€ä¸ªæŸ±çŠ¶å›¾ï¼Œè¯·å¸®æˆ‘ç¾åŒ–ï¼š

è¦æ±‚ï¼š
- ä½¿ç”¨ä¸“ä¸šé…è‰²æ–¹æ¡ˆ
- æ·»åŠ æ•°æ®æ ‡ç­¾
- ä¼˜åŒ–å­—ä½“å¤§å°
- æ·»åŠ é€‚å½“çš„æ ‡é¢˜å’Œè½´æ ‡ç­¾
- å»é™¤ä¸Šæ–¹å’Œå³ä¾§è¾¹æ¡†
- æ·»åŠ ç½‘æ ¼çº¿

åŸå§‹ä»£ç ï¼š
[ç²˜è´´ä»£ç ]
```

### ä¿å­˜é«˜è´¨é‡å›¾ç‰‡

```{python}
#| eval: false
# ä¿å­˜ä¸º PNGï¼ˆé€‚åˆç½‘é¡µï¼‰
plt.savefig('chart.png', dpi=300, bbox_inches='tight', facecolor='white')

# ä¿å­˜ä¸º PDFï¼ˆé€‚åˆå°åˆ·ï¼‰
plt.savefig('chart.pdf', bbox_inches='tight')

# ä¿å­˜ä¸º SVGï¼ˆé€‚åˆç¼©æ”¾ï¼‰
plt.savefig('chart.svg', bbox_inches='tight')
```

---

## è¯¾åä½œä¸š

### å®Œæˆä½œä¸š 4ï¼šæ•°æ®å¯è§†åŒ–ä»ªè¡¨æ¿

**æœ¬å‘¨ä»»åŠ¡**ï¼šæäº¤æœ€ç»ˆç‰ˆæœ¬

1. å®Œæˆæ•°æ®æ¸…æ´—åçš„å¯è§†åŒ–
2. ç»˜åˆ¶è‡³å°‘ 6 ç§ä¸åŒå›¾è¡¨
3. æ•´åˆä¸ºä»ªè¡¨æ¿å¸ƒå±€
4. æ·»åŠ  AI ç”Ÿæˆçš„æ´å¯Ÿæè¿°

**æäº¤æˆªæ­¢**ï¼šæœ¬å‘¨æ—¥

---

## æœ¬ç« å°ç»“

- **é€‰æ‹©å›¾è¡¨**ï¼šæ ¹æ®ç›®çš„é€‰æ‹©åˆé€‚çš„å›¾è¡¨ç±»å‹
- **Matplotlib**ï¼šPython ç»‘å›¾çš„åŸºç¡€ï¼Œçµæ´»ä½†éœ€è¦æ›´å¤šä»£ç 
- **Seaborn**ï¼šç»Ÿè®¡å¯è§†åŒ–ä¸“ç”¨ï¼Œä»£ç æ›´ç®€æ´ï¼Œå›¾è¡¨æ›´ç¾è§‚
- **ç¾åŒ–æŠ€å·§**ï¼šé…è‰²ã€æ ‡ç­¾ã€ç½‘æ ¼ã€å­—ä½“
- **è®© AI å¸®å¿™**ï¼šæè¿°éœ€æ±‚ï¼Œè®© AI ä¼˜åŒ–ä»£ç 

```{mermaid}
flowchart LR
    A["æ•°æ®"] --> B["é€‰æ‹©å›¾è¡¨"]
    B --> C["åŸºç¡€ç»˜åˆ¶"]
    C --> D["ç¾åŒ–è°ƒæ•´"]
    D --> E["ä¿å­˜/å±•ç¤º"]
```

ä¸‹ä¸€ç« ï¼Œæˆ‘ä»¬å°†å­¦ä¹ **API è°ƒç”¨**â€”â€”ä»ç½‘ç»œè·å–æ•°æ®ã€‚
