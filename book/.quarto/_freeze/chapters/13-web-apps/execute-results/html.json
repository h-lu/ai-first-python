{
  "hash": "bc5e5759a1c3c7936779d15cc0d9a89d",
  "result": {
    "engine": "jupyter",
    "markdown": "# Web åº”ç”¨å¼€å‘ {#sec-web-apps}\n\n::: {.callout-note}\n## æœ¬ç« æ¦‚è¦\n- **è¯¾æ—¶**ï¼š2è¯¾æ—¶ï¼ˆç¬¬13å‘¨ï¼‰\n- **ç›®æ ‡**ï¼šç”¨ Streamlit å¿«é€Ÿæ„å»º Web ç•Œé¢\n:::\n\n## å­¦ä¹ ç›®æ ‡\n\nå®Œæˆæœ¬ç« åï¼Œä½ å°†èƒ½å¤Ÿï¼š\n\n1. ä½¿ç”¨ Streamlit æ„å»º Web åº”ç”¨\n2. åˆ›å»ºäº¤äº’å¼æ•°æ®å¯è§†åŒ–ç•Œé¢\n3. ä¸º AI åº”ç”¨æ·»åŠ èŠå¤©ç•Œé¢\n4. äº†è§£åº”ç”¨éƒ¨ç½²åŸºç¡€\n\n---\n\n## ä¸ºä»€ä¹ˆé€‰æ‹© Streamlitï¼Ÿ\n\n```{mermaid}\nflowchart LR\n    subgraph \"ä¼ ç»Ÿ Web å¼€å‘\"\n        A1[\"å­¦ä¹  HTML/CSS/JS\"] --> A2[\"å­¦ä¹ åç«¯æ¡†æ¶\"]\n        A2 --> A3[\"æ•°å‘¨å¼€å‘\"]\n    end\n    \n    subgraph \"Streamlit\"\n        B1[\"å†™ Python\"] --> B2[\"å‡ åˆ†é’Ÿå®Œæˆ\"]\n    end\n    \n    style B1 fill:#e8f5e9\n    style B2 fill:#e8f5e9\n```\n\n| åœºæ™¯ | ä¼ ç»Ÿå¼€å‘ | Streamlit |\n|-----|---------|-----------|\n| æ•°æ®ä»ªè¡¨æ¿ | éœ€è¦å‰åç«¯é…åˆ | å‡ åè¡Œ Python |\n| AI åŸå‹ | å¤æ‚çš„æ¥å£è®¾è®¡ | å†…ç½® chat ç»„ä»¶ |\n| å†…éƒ¨å·¥å…· | å®Œæ•´å¼€å‘æµç¨‹ | å¿«é€Ÿè¿­ä»£ |\n\n---\n\n## å¿«é€Ÿå…¥é—¨\n\n### å®‰è£…\n\n```bash\npip install streamlit\n```\n\n### Hello World\n\nåˆ›å»º `app.py`ï¼š\n\n::: {#33f17add .cell execution_count=1}\n``` {.python .cell-code}\nimport streamlit as st\n\nst.title(\"æˆ‘çš„ç¬¬ä¸€ä¸ª Streamlit åº”ç”¨\")\nst.write(\"Hello, World! ğŸ‘‹\")\n\n# æ˜¾ç¤º Markdown\nst.markdown(\"\"\"\n## è¿™æ˜¯äºŒçº§æ ‡é¢˜\n- æ”¯æŒ **ç²—ä½“**\n- æ”¯æŒ *æ–œä½“*\n- æ”¯æŒ `ä»£ç `\n\"\"\")\n```\n:::\n\n\nè¿è¡Œï¼š\n\n```bash\nstreamlit run app.py\n```\n\n---\n\n## å¸¸ç”¨ç»„ä»¶\n\n### è¾“å…¥ç»„ä»¶\n\n::: {#f993871f .cell execution_count=2}\n``` {.python .cell-code}\nimport streamlit as st\n\n# æ–‡æœ¬è¾“å…¥\nname = st.text_input(\"è¯·è¾“å…¥å§“å\")\n\n# æ•°å­—è¾“å…¥\nage = st.number_input(\"è¯·è¾“å…¥å¹´é¾„\", min_value=0, max_value=150)\n\n# æ»‘å—\nscore = st.slider(\"é€‰æ‹©åˆ†æ•°\", 0, 100, 60)\n\n# ä¸‹æ‹‰é€‰æ‹©\noption = st.selectbox(\"é€‰æ‹©åŸå¸‚\", [\"åŒ—äº¬\", \"ä¸Šæµ·\", \"å¹¿å·\", \"æ·±åœ³\"])\n\n# å¤šé€‰\nhobbies = st.multiselect(\"é€‰æ‹©çˆ±å¥½\", [\"è¯»ä¹¦\", \"è¿åŠ¨\", \"éŸ³ä¹\", \"æ—…è¡Œ\"])\n\n# æŒ‰é’®\nif st.button(\"æäº¤\"):\n    st.write(f\"ä½ å¥½ï¼Œ{name}ï¼\")\n```\n:::\n\n\n### å¸ƒå±€ç»„ä»¶\n\n::: {#8751726b .cell execution_count=3}\n``` {.python .cell-code}\nimport streamlit as st\n\n# ä¾§è¾¹æ \nwith st.sidebar:\n    st.title(\"è®¾ç½®\")\n    option = st.radio(\"é€‰æ‹©æ¨¡å¼\", [\"æ¨¡å¼A\", \"æ¨¡å¼B\"])\n\n# åˆ—å¸ƒå±€\ncol1, col2 = st.columns(2)\nwith col1:\n    st.header(\"å·¦è¾¹\")\n    st.write(\"å†…å®¹...\")\nwith col2:\n    st.header(\"å³è¾¹\")\n    st.write(\"å†…å®¹...\")\n\n# å±•å¼€/æŠ˜å \nwith st.expander(\"ç‚¹å‡»å±•å¼€è¯¦æƒ…\"):\n    st.write(\"è¿™æ˜¯éšè—çš„å†…å®¹\")\n\n# æ ‡ç­¾é¡µ\ntab1, tab2 = st.tabs([\"æ•°æ®\", \"å›¾è¡¨\"])\nwith tab1:\n    st.write(\"æ•°æ®å†…å®¹\")\nwith tab2:\n    st.write(\"å›¾è¡¨å†…å®¹\")\n```\n:::\n\n\n### æ˜¾ç¤ºç»„ä»¶\n\n```{mermaid}\nmindmap\n  root((Streamlit ç»„ä»¶))\n    è¾“å…¥\n      text_input\n      number_input\n      slider\n      selectbox\n      button\n    å¸ƒå±€\n      sidebar\n      columns\n      tabs\n      expander\n    æ˜¾ç¤º\n      write\n      markdown\n      dataframe\n      pyplot\n      chat_message\n```\n\n---\n\n## å®æˆ˜ï¼šæ•°æ®å¯è§†åŒ–ä»ªè¡¨æ¿\n\n::: {#b6c1f015 .cell execution_count=4}\n``` {.python .cell-code}\nimport streamlit as st\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport numpy as np\n\nst.title(\"ğŸ“Š æ•°æ®åˆ†æä»ªè¡¨æ¿\")\n\n# ä¾§è¾¹æ ï¼šæ–‡ä»¶ä¸Šä¼ \nwith st.sidebar:\n    st.header(\"æ•°æ®è®¾ç½®\")\n    uploaded_file = st.file_uploader(\"ä¸Šä¼  CSV æ–‡ä»¶\", type=['csv'])\n    \n    if uploaded_file:\n        df = pd.read_csv(uploaded_file)\n    else:\n        # æ¼”ç¤ºæ•°æ®\n        np.random.seed(42)\n        df = pd.DataFrame({\n            'å§“å': [f'å­¦ç”Ÿ{i}' for i in range(1, 31)],\n            'è¯­æ–‡': np.random.randint(50, 100, 30),\n            'æ•°å­¦': np.random.randint(50, 100, 30),\n            'è‹±è¯­': np.random.randint(50, 100, 30)\n        })\n        st.info(\"ä½¿ç”¨æ¼”ç¤ºæ•°æ®\")\n\n# ä¸»é¡µé¢\nst.header(\"æ•°æ®é¢„è§ˆ\")\nst.dataframe(df.head(10))\n\n# ç»Ÿè®¡ä¿¡æ¯\nst.header(\"ç»Ÿè®¡æ‘˜è¦\")\ncol1, col2, col3 = st.columns(3)\nwith col1:\n    st.metric(\"è¡Œæ•°\", len(df))\nwith col2:\n    st.metric(\"åˆ—æ•°\", len(df.columns))\nwith col3:\n    if 'è¯­æ–‡' in df.columns:\n        st.metric(\"è¯­æ–‡å¹³å‡åˆ†\", f\"{df['è¯­æ–‡'].mean():.1f}\")\n\n# å¯è§†åŒ–\nst.header(\"æ•°æ®å¯è§†åŒ–\")\n\n# é€‰æ‹©åˆ—\nnumeric_cols = df.select_dtypes(include=[np.number]).columns.tolist()\nselected_col = st.selectbox(\"é€‰æ‹©è¦åˆ†æçš„åˆ—\", numeric_cols)\n\n# ç»‘åˆ¶å›¾è¡¨\nfig, axes = plt.subplots(1, 2, figsize=(12, 4))\n\naxes[0].hist(df[selected_col], bins=10, color='steelblue', edgecolor='white')\naxes[0].set_title(f'{selected_col} åˆ†å¸ƒ')\naxes[0].set_xlabel(selected_col)\naxes[0].set_ylabel('é¢‘æ•°')\n\nif len(numeric_cols) >= 2:\n    axes[1].scatter(df[numeric_cols[0]], df[numeric_cols[1]], alpha=0.6)\n    axes[1].set_title(f'{numeric_cols[0]} vs {numeric_cols[1]}')\n    axes[1].set_xlabel(numeric_cols[0])\n    axes[1].set_ylabel(numeric_cols[1])\n\nst.pyplot(fig)\n```\n:::\n\n\n---\n\n## å®æˆ˜ï¼šAI èŠå¤©ç•Œé¢\n\n### åŸºç¡€èŠå¤©ç•Œé¢ï¼ˆä½¿ç”¨ OpenAI åº“ï¼‰\n\n::: {#25056b8f .cell execution_count=5}\n``` {.python .cell-code}\nimport streamlit as st\nfrom openai import OpenAI\nimport os\nfrom dotenv import load_dotenv\n\nload_dotenv()\n\nst.title(\"ğŸ¤– AI èŠå¤©åŠ©æ‰‹\")\n\n# åˆå§‹åŒ– OpenAI å®¢æˆ·ç«¯\n@st.cache_resource\ndef get_client():\n    return OpenAI(\n        api_key=os.getenv(\"DEEPSEEK_API_KEY\"),\n        base_url=\"https://api.deepseek.com\"\n    )\n\nclient = get_client()\n\n# åˆå§‹åŒ–èŠå¤©å†å²\nif \"messages\" not in st.session_state:\n    st.session_state.messages = []\n\n# æ˜¾ç¤ºå†å²æ¶ˆæ¯\nfor message in st.session_state.messages:\n    with st.chat_message(message[\"role\"]):\n        st.markdown(message[\"content\"])\n\n# ç”¨æˆ·è¾“å…¥\nif prompt := st.chat_input(\"è¯·è¾“å…¥æ¶ˆæ¯...\"):\n    # æ˜¾ç¤ºç”¨æˆ·æ¶ˆæ¯\n    with st.chat_message(\"user\"):\n        st.markdown(prompt)\n    st.session_state.messages.append({\"role\": \"user\", \"content\": prompt})\n    \n    # è°ƒç”¨ AI è·å–å›å¤\n    with st.chat_message(\"assistant\"):\n        with st.spinner(\"æ€è€ƒä¸­...\"):\n            response = client.chat.completions.create(\n                model=\"deepseek-chat\",\n                messages=[\n                    {\"role\": \"system\", \"content\": \"ä½ æ˜¯ä¸€ä¸ªæœ‰å¸®åŠ©çš„åŠ©æ‰‹\"}\n                ] + st.session_state.messages\n            )\n            reply = response.choices[0].message.content\n            st.markdown(reply)\n    \n    st.session_state.messages.append({\"role\": \"assistant\", \"content\": reply})\n```\n:::\n\n\n### å¸¦æµå¼è¾“å‡ºçš„å®Œæ•´ç‰ˆ\n\n::: {#4871fcda .cell execution_count=6}\n``` {.python .cell-code}\nimport streamlit as st\nfrom openai import OpenAI\nimport os\nfrom dotenv import load_dotenv\n\nload_dotenv()\n\nst.set_page_config(page_title=\"AI åŠ©æ‰‹\", page_icon=\"ğŸ¤–\")\n\n# åˆå§‹åŒ–å®¢æˆ·ç«¯\n@st.cache_resource\ndef get_client():\n    return OpenAI(\n        api_key=os.getenv(\"DEEPSEEK_API_KEY\"),\n        base_url=\"https://api.deepseek.com\"\n    )\n\nclient = get_client()\n\n# ä¾§è¾¹æ è®¾ç½®\nwith st.sidebar:\n    st.title(\"âš™ï¸ è®¾ç½®\")\n    \n    # System Prompt è®¾ç½®\n    system_prompt = st.text_area(\n        \"System Prompt\",\n        value=\"ä½ æ˜¯ä¸€ä¸ªå‹å¥½çš„ä¸­æ–‡åŠ©æ‰‹ã€‚\",\n        height=100\n    )\n    \n    # æ¸©åº¦å‚æ•°\n    temperature = st.slider(\"åˆ›é€ æ€§ (Temperature)\", 0.0, 1.0, 0.7)\n    \n    # æ¸…ç©ºå¯¹è¯æŒ‰é’®\n    if st.button(\"ğŸ—‘ï¸ æ¸…ç©ºå¯¹è¯\"):\n        st.session_state.messages = []\n        st.rerun()\n    \n    st.divider()\n    \n    with st.expander(\"ğŸ“– ä½¿ç”¨è¯´æ˜\"):\n        st.markdown(\"\"\"\n        1. åœ¨è¾“å…¥æ¡†è¾“å…¥é—®é¢˜\n        2. æ”¯æŒæµå¼è¾“å‡ºï¼Œå®æ—¶æ˜¾ç¤ºå›å¤\n        3. è°ƒæ•´ä¾§è¾¹æ è®¾ç½®å¯æ”¹å˜ AI è¡Œä¸º\n        \"\"\")\n\n# ä¸»ç•Œé¢\nst.title(\"ğŸ¤– æ™ºèƒ½å¯¹è¯åŠ©æ‰‹\")\n\n# åˆå§‹åŒ–èŠå¤©å†å²\nif \"messages\" not in st.session_state:\n    st.session_state.messages = []\n\n# æ˜¾ç¤ºå†å²æ¶ˆæ¯\nfor message in st.session_state.messages:\n    with st.chat_message(message[\"role\"]):\n        st.markdown(message[\"content\"])\n\n# ç”¨æˆ·è¾“å…¥\nif prompt := st.chat_input(\"è¯·è¾“å…¥æ¶ˆæ¯...\"):\n    # æ˜¾ç¤ºç”¨æˆ·æ¶ˆæ¯\n    with st.chat_message(\"user\"):\n        st.markdown(prompt)\n    st.session_state.messages.append({\"role\": \"user\", \"content\": prompt})\n    \n    # æµå¼è¾“å‡º AI å›å¤\n    with st.chat_message(\"assistant\"):\n        # åˆ›å»ºå ä½ç¬¦ç”¨äºæµå¼æ›´æ–°\n        message_placeholder = st.empty()\n        full_response = \"\"\n        \n        # æµå¼è°ƒç”¨\n        stream = client.chat.completions.create(\n            model=\"deepseek-chat\",\n            messages=[\n                {\"role\": \"system\", \"content\": system_prompt}\n            ] + st.session_state.messages,\n            temperature=temperature,\n            stream=True\n        )\n        \n        for chunk in stream:\n            if chunk.choices[0].delta.content:\n                full_response += chunk.choices[0].delta.content\n                message_placeholder.markdown(full_response + \"â–Œ\")\n        \n        message_placeholder.markdown(full_response)\n    \n    st.session_state.messages.append({\"role\": \"assistant\", \"content\": full_response})\n```\n:::\n\n\n---\n\n## Session State è¯¦è§£\n\n### ä¸ºä»€ä¹ˆéœ€è¦ Session Stateï¼Ÿ\n\n```{mermaid}\nflowchart TD\n    A[\"ç”¨æˆ·äº¤äº’\"] --> B[\"é¡µé¢åˆ·æ–°\"]\n    B --> C{\"æœ‰ Session State?\"}\n    C -->|æ˜¯| D[\"æ•°æ®ä¿ç•™\"]\n    C -->|å¦| E[\"æ•°æ®ä¸¢å¤±\"]\n```\n\n### å¸¸ç”¨æ¨¡å¼\n\n::: {#8ac66386 .cell execution_count=7}\n``` {.python .cell-code}\nimport streamlit as st\n\n# åˆå§‹åŒ–\nif \"count\" not in st.session_state:\n    st.session_state.count = 0\n\n# ä½¿ç”¨\nst.write(f\"è®¡æ•°: {st.session_state.count}\")\n\n# æ›´æ–°\nif st.button(\"ç‚¹å‡»+1\"):\n    st.session_state.count += 1\n    st.rerun()  # åˆ·æ–°é¡µé¢\n\n# åˆ é™¤\nif st.button(\"é‡ç½®\"):\n    del st.session_state.count\n    st.rerun()\n```\n:::\n\n\n---\n\n## éƒ¨ç½²åº”ç”¨\n\n### Streamlit Cloudï¼ˆæ¨èï¼‰\n\n1. å°†ä»£ç æ¨é€åˆ° GitHub\n2. åˆ›å»º `requirements.txt`\n3. è®¿é—® [share.streamlit.io](https://share.streamlit.io)\n4. è¿æ¥ä»“åº“å¹¶éƒ¨ç½²\n\n**requirements.txt ç¤ºä¾‹**ï¼š\n\n```\nstreamlit\npandas\nmatplotlib\nopenai\npython-dotenv\n```\n\n### ç¯å¢ƒå˜é‡é…ç½®\n\nåœ¨ Streamlit Cloud ä¸­ï¼š\n1. è¿›å…¥åº”ç”¨è®¾ç½®\n2. æ·»åŠ  Secrets\n3. æ ¼å¼ï¼š`DEEPSEEK_API_KEY = \"your-key\"`\n\nä»£ç ä¸­è¯»å–ï¼š\n```python\napi_key = st.secrets[\"DEEPSEEK_API_KEY\"]\n```\n\n---\n\n## è¯¾åä½œä¸š\n\n### ä½œä¸š 5 ç»§ç»­ï¼šæ·»åŠ  Web ç•Œé¢\n\n**æœ¬å‘¨ä»»åŠ¡**ï¼š\n\n1. ä¸ºæœŸæœ«é¡¹ç›®æ·»åŠ  Streamlit ç•Œé¢\n2. è‡³å°‘åŒ…å«ï¼š\n   - ç”¨æˆ·è¾“å…¥åŒºåŸŸ\n   - ç»“æœæ˜¾ç¤ºåŒºåŸŸ\n   - ä¾§è¾¹æ è®¾ç½®ï¼ˆå¯é€‰ï¼‰\n\n**æ¨èç»“æ„**ï¼š\n\n```\nproject/\nâ”œâ”€â”€ app.py           # Streamlit å…¥å£\nâ”œâ”€â”€ core.py          # æ ¸å¿ƒé€»è¾‘\nâ”œâ”€â”€ requirements.txt # ä¾èµ–\nâ””â”€â”€ .env             # API Keysï¼ˆä¸æäº¤ï¼‰\n```\n\n---\n\n## æœ¬ç« å°ç»“\n\n- **Streamlit** è®© Python å¼€å‘è€…å¿«é€Ÿæ„å»º Web åº”ç”¨\n- **æ ¸å¿ƒæ¦‚å¿µ**ï¼šç»„ä»¶ã€å¸ƒå±€ã€Session State\n- **å¸¸ç”¨ç»„ä»¶**ï¼šinputã€buttonã€dataframeã€chat_message\n- **éƒ¨ç½²**ï¼šStreamlit Cloud å…è´¹æ‰˜ç®¡\n\n```{mermaid}\nflowchart LR\n    A[\"Python è„šæœ¬\"] --> B[\"æ·»åŠ  Streamlit\"]\n    B --> C[\"æœ¬åœ°æµ‹è¯•\"]\n    C --> D[\"æ¨é€ GitHub\"]\n    D --> E[\"Streamlit Cloud\"]\n    E --> F[\"åˆ†äº«é“¾æ¥\"]\n```\n\nä¸‹ä¸€ç« ï¼Œæˆ‘ä»¬å°†è¿›å…¥ **ç»¼åˆé¡¹ç›®å¼€å‘**â€”â€”æ•´åˆæ‰€å­¦ï¼Œå®Œæˆä¸€ä¸ªå®Œæ•´çš„é¡¹ç›®ã€‚\n\n",
    "supporting": [
      "13-web-apps_files"
    ],
    "filters": [],
    "includes": {}
  }
}